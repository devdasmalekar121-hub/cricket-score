<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>CHHOTU LIVE BROADCAST PRO | ULTRA ULTIMATE EDITION 2026</title>
    
    <script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-database-compat.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@600;900&family=Oswald:wght@400;700&family=Teko:wght@300;600&display=swap" rel="stylesheet">
    
    <style>
        :root { 
            --primary: #fec309; 
            --secondary: #00e1ff; 
            --danger: #ff0040; 
            --success: #00c853;
            --bg-dark: #020812; 
            --panel-bg: #0d1626;
            --accent-blue: #1a73e8;
            --broadcast-font: 'Orbitron', sans-serif;
            --ui-font: 'Oswald', sans-serif;
            --text-main: #ffffff;
        }

        /* Full Page Styling */
        body { 
            background: var(--bg-dark); 
            color: var(--text-main); 
            font-family: var(--ui-font); 
            margin: 0; padding: 0; 
            overflow-x: hidden; 
        }

        /* --- BROADCAST SCOREBOARD (TV STYLE) --- */
        .broadcast-container {
            width: 100%; background: #000; position: sticky; top: 0; z-index: 999;
            border-bottom: 4px solid var(--primary); box-shadow: 0 10px 50px rgba(0,0,0,0.9);
        }

        .ticker-top {
            background: #000; height: 30px; display: flex; justify-content: space-between;
            padding: 0 20px; font-family: var(--broadcast-font); font-size: 11px;
            align-items: center; border-bottom: 1px solid #222; color: #aaa;
        }

        .main-scoreboard {
            height: 120px; display: flex; background: linear-gradient(90deg, #001026 0%, #000 100%);
            position: relative; align-items: center;
        }

        .team-identity {
            background: var(--primary); color: #000; height: 100%; padding: 0 40px;
            display: flex; align-items: center; font-family: var(--broadcast-font);
            font-size: 38px; font-weight: 900; clip-path: polygon(0 0, 88% 0, 100% 100%, 0% 100%);
        }

        .live-score-display {
            padding: 0 30px; display: flex; align-items: baseline; gap: 10px;
        }

        .runs-huge { font-family: var(--broadcast-font); font-size: 70px; font-weight: 900; }
        .wickets-huge { font-family: var(--broadcast-font); font-size: 70px; font-weight: 900; color: var(--danger); }
        .overs-small { font-size: 28px; opacity: 0.6; margin-left: 10px; }

        .batsmen-info {
            flex-grow: 1; border-left: 1px solid rgba(255,255,255,0.1); padding: 0 30px;
        }

        .player-row {
            display: flex; justify-content: space-between; font-family: var(--broadcast-font);
            font-size: 18px; padding: 4px 10px; margin: 2px 0; transition: 0.3s;
        }

        .on-strike { 
            background: rgba(254, 195, 9, 0.15); border-left: 4px solid var(--primary); color: var(--primary);
            text-shadow: 0 0 10px rgba(254, 195, 9, 0.3);
        }

        .opponent-status-panel {
            min-width: 250px; background: rgba(0, 225, 255, 0.05); height: 100%;
            border-left: 2px solid var(--secondary); display: flex; flex-direction: column;
            justify-content: center; align-items: center; text-align: center;
        }

        /* --- ADMIN DASHBOARD --- */
        .admin-wrap { padding: 40px 20px; max-width: 1400px; margin: auto; }
        .control-grid { display: grid; grid-template-columns: 1.5fr 1fr; gap: 30px; }

        .glass-panel {
            background: var(--panel-bg); border: 1px solid rgba(255,255,255,0.05);
            border-radius: 20px; padding: 30px; box-shadow: 0 20px 40px rgba(0,0,0,0.4);
        }

        .feature-title {
            color: var(--primary); font-family: var(--broadcast-font); font-size: 12px;
            letter-spacing: 3px; text-transform: uppercase; margin-bottom: 25px; display: block;
        }

        .action-btns { display: grid; grid-template-columns: repeat(4, 1fr); gap: 15px; }
        
        button {
            background: var(--accent-blue); color: #fff; border: none; padding: 20px;
            border-radius: 12px; font-family: var(--ui-font); font-size: 18px; font-weight: 700;
            cursor: pointer; transition: 0.2s; box-shadow: 0 5px 0 rgba(0,0,0,0.3);
        }

        button:active { transform: translateY(3px); box-shadow: none; }
        .btn-wicket { background: var(--danger); }
        .btn-boundary { background: var(--primary); color: #000; }
        .btn-next { background: var(--success); height: 80px; font-size: 24px; grid-column: span 4; }
        
        .input-group { margin-bottom: 15px; }
        label { display: block; font-size: 12px; color: #666; margin-bottom: 5px; text-transform: uppercase; }
        input {
            width: 100%; background: #000; border: 1px solid #222; color: #fff;
            padding: 12px; border-radius: 8px; font-family: var(--broadcast-font); font-size: 14px;
        }

        /* Animated Overlays */
        #overlay-layer {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.9); z-index: 20000; display: none;
            flex-direction: column; align-items: center; justify-content: center;
            font-family: var(--broadcast-font); font-size: 100px; font-weight: 900;
        }

        .hidden { display: none !important; }

        /* Responsive Mobile */
        @media (max-width: 900px) {
            .main-scoreboard { height: auto; flex-direction: column; }
            .team-identity { width: 100%; clip-path: none; justify-content: center; padding: 15px 0; }
            .control-grid { grid-template-columns: 1fr; }
            .action-btns { grid-template-columns: repeat(2, 1fr); }
            .btn-next { grid-column: span 2; }
        }
    </style>
</head>
<body onload="initApp()">

    <div id="overlay-layer"></div>

    <div class="broadcast-container">
        <div class="ticker-top">
            <span><span style="color:red">‚óè</span> LIVE BROADCAST | <span id="disp-tour">MATCH DAY</span></span>
            <span id="disp-clock">00:00:00</span>
        </div>

        <div class="main-scoreboard">
            <div class="team-identity" id="disp-team-a">TEAM A</div>
            
            <div class="live-score-display">
                <span class="runs-huge" id="disp-runs">0</span>
                <span style="font-size: 50px; opacity: 0.3; margin: 0 10px;">/</span>
                <span class="wickets-huge" id="disp-wkts">0</span>
                <span class="overs-small" id="disp-overs">(0.0)</span>
            </div>

            <div class="batsmen-info">
                <div class="player-row" id="p1-row">
                    <span id="disp-p1-name">PLAYER 1</span>
                    <span id="disp-p1-score">0 (0)</span>
                </div>
                <div class="player-row" id="p2-row">
                    <span id="disp-p2-name">PLAYER 2</span>
                    <span id="disp-p2-score">0 (0)</span>
                </div>
            </div>

            <div class="opponent-status-panel">
                <div id="disp-team-b" style="font-size: 12px; color: var(--secondary); letter-spacing: 2px; margin-bottom: 5px;">OPPONENT</div>
                <div id="disp-opp-score" style="font-size: 22px; font-weight: 900;">0-0 (0.0)</div>
                <div style="font-size: 12px; margin-top: 5px; opacity: 0.7;">TARGET: <span id="disp-target" style="color:var(--primary)">0</span></div>
            </div>
        </div>
    </div>

    <div class="admin-wrap">
        
        <div id="auth-box" class="glass-panel" style="max-width: 400px; margin: 50px auto; text-align: center;">
            <h2 style="color:var(--primary)">ADMIN ACCESS</h2>
            <input type="password" id="pin" placeholder="ENTER PIN" style="text-align: center; font-size: 24px;">
            <button onclick="login()" style="width: 100%; margin-top: 20px;">UNLOCK</button>
        </div>

        <div id="dashboard" class="hidden">
            <div class="control-grid">
                
                <div class="glass-panel">
                    <span class="feature-title">Match Scoring Controller</span>
                    
                    <button class="btn-next" onclick="handleBall('dot')">NEXT BALL (DOT)</button>
                    
                    <div class="action-btns" style="margin-top: 20px;">
                        <button onclick="handleRun(1)">+1 Run</button>
                        <button onclick="handleRun(2)">+2 Runs</button>
                        <button onclick="handleRun(3)">+3 Runs</button>
                        <button onclick="undoRun()" style="background:#333">UNDO</button>
                    </div>

                    <div class="action-btns" style="margin-top: 15px;">
                        <button class="btn-boundary" onclick="handleRun(4)">FOUR (4)</button>
                        <button class="btn-boundary" onclick="handleRun(6)">SIX (6)</button>
                        <button class="btn-wicket" onclick="handleWicket()" style="grid-column: span 2;">WICKET (OUT)</button>
                    </div>

                    <div class="action-btns" style="margin-top: 15px;">
                        <button onclick="handleExtra('WD')" style="background:#1e2a44">WD</button>
                        <button onclick="handleExtra('NB')" style="background:#1e2a44">NB</button>
                        <button onclick="handleExtra('LB')" style="background:#1e2a44">LB</button>
                        <button onclick="swapStrike()" style="background:var(--primary); color:#000">SWAP</button>
                    </div>

                    <div style="margin-top: 30px; display: flex; gap: 10px;">
                        <button onclick="saveMatchToArchive()" style="flex: 2; background: var(--success);">SAVE TO HISTORY</button>
                        <button onclick="resetMatch()" style="flex: 1; background: var(--danger);">RESET ALL</button>
                    </div>
                </div>

                <div class="glass-panel">
                    <span class="feature-title">Match Configuration</span>
                    
                    <div class="input-group">
                        <label>Tournament Name</label>
                        <input type="text" id="in-tour" oninput="sync()">
                    </div>

                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                        <div class="input-group">
                            <label>Batting Team (A)</label>
                            <input type="text" id="in-team-a" oninput="sync()">
                        </div>
                        <div class="input-group">
                            <label>Bowling Team (B)</label>
                            <input type="text" id="in-team-b" oninput="sync()">
                        </div>
                    </div>

                    <div class="input-group">
                        <label>Striker (P1)</label>
                        <input type="text" id="in-p1" oninput="sync()">
                    </div>
                    <div class="input-group">
                        <label>Non-Striker (P2)</label>
                        <input type="text" id="in-p2" oninput="sync()">
                    </div>
                    
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                        <div class="input-group">
                            <label>Target</label>
                            <input type="number" id="in-target" oninput="sync()">
                        </div>
                        <div class="input-group">
                            <label>Opponent Score</label>
                            <input type="text" id="in-opp" oninput="sync()">
                        </div>
                    </div>
                </div>

            </div>

            <div class="glass-panel" style="margin-top: 30px;">
                <span class="feature-title">Match Analytics & Pro Stats</span>
                <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px;">
                    <div style="text-align: center; border-right: 1px solid #222;">
                        <div style="font-size: 10px; color: #666;">RUN RATE</div>
                        <div id="stat-crr" style="font-size: 24px; color: var(--secondary);">0.00</div>
                    </div>
                    <div style="text-align: center; border-right: 1px solid #222;">
                        <div style="font-size: 10px; color: #666;">REQUIRED</div>
                        <div id="stat-rrr" style="font-size: 24px; color: var(--danger);">0.00</div>
                    </div>
                    <div style="text-align: center; border-right: 1px solid #222;">
                        <div style="font-size: 10px; color: #666;">PARTNERSHIP</div>
                        <div id="stat-pship" style="font-size: 24px; color: var(--primary);">0 (0)</div>
                    </div>
                    <div style="text-align: center;">
                        <div style="font-size: 10px; color: #666;">EXTRAS</div>
                        <div id="stat-extras" style="font-size: 24px;">0</div>
                    </div>
                </div>
            </div>

            <div class="glass-panel" style="margin-top: 30px;">
                <span class="feature-title">Match Archive History</span>
                <div id="history-list"></div>
            </div>

        </div>
    </div>

    <script>
        // --- DATABASE CONFIGURATION ---
        const firebaseConfig = { databaseURL: "Https://myscoreboard-b140f-default-rtdb.firebaseio.com/" };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database().ref("pro_broadcast_2026");
        const archive = firebase.database().ref("pro_archives");

        let state = {
            runs: 0, wkts: 0, overs: 0, balls: 0,
            teamA: "TEAM A", teamB: "OPPONENT", tour: "TOURNAMENT",
            p1: { name: "PLAYER 1", r: 0, b: 0 },
            p2: { name: "PLAYER 2", r: 0, b: 0 },
            strike: 1, target: 0, oppScore: "0-0 (0.0)", extras: 0,
            pship: { r: 0, b: 0 }
        };

        // --- CORE LOGIC ---
        function initApp() {
            if(localStorage.getItem("admin_auth") === "active") showDashboard();
            
            db.on('value', snap => {
                if(snap.val()) {
                    state = snap.val();
                    updateUI();
                }
            });

            setInterval(() => {
                document.getElementById('disp-clock').innerText = new Date().toLocaleTimeString();
            }, 1000);
            
            loadHistory();
        }

        function handleRun(r) {
            state.runs += r;
            state.pship.r += r;
            if(state.strike === 1) state.p1.r += r; else state.p2.r += r;
            
            if(r === 4) showFX("FOUR!", "#fec309");
            if(r === 6) showFX("SIX!", "#00e1ff");
            
            if(r === 1 || r === 3) swapStrikeLogic();
            save();
        }

        function handleBall(type) {
            if(state.strike === 1) state.p1.b++; else state.p2.b++;
            state.pship.b++;
            state.balls++;
            
            if(state.balls >= 6) {
                state.overs++;
                state.balls = 0;
                swapStrikeLogic();
            }
            save();
        }

        function handleWicket() {
            let name = prompt("Enter New Batsman Name:");
            if(!name) return;
            
            showFX("WICKET!", "#ff0040");
            state.wkts++;
            state.pship = { r: 0, b: 0 };
            
            if(state.strike === 1) {
                state.p1 = { name: name.toUpperCase(), r: 0, b: 0 };
            } else {
                state.p2 = { name: name.toUpperCase(), r: 0, b: 0 };
            }
            save();
        }

        function handleExtra(type) {
            state.runs++;
            state.extras++;
            if(type === 'NB') showFX("FREE HIT!", "#00c853");
            save();
        }

        function swapStrikeLogic() {
            state.strike = (state.strike === 1) ? 2 : 1;
        }

        function swapStrike() {
            swapStrikeLogic();
            save();
        }

        function undoRun() {
            if(state.runs > 0) state.runs--;
            save();
        }

        // --- UI & SYNC ---
        function save() { db.set(state); }

        function sync() {
            state.tour = document.getElementById('in-tour').value.toUpperCase();
            state.teamA = document.getElementById('in-team-a').value.toUpperCase();
            state.teamB = document.getElementById('in-team-b').value.toUpperCase();
            state.p1.name = document.getElementById('in-p1').value.toUpperCase();
            state.p2.name = document.getElementById('in-p2').value.toUpperCase();
            state.target = parseInt(document.getElementById('in-target').value) || 0;
            state.oppScore = document.getElementById('in-opp').value;
            save();
        }

        function updateUI() {
            // Display Elements
            document.getElementById('disp-runs').innerText = state.runs;
            document.getElementById('disp-wkts').innerText = state.wkts;
            document.getElementById('disp-overs').innerText = `(${state.overs}.${state.balls})`;
            document.getElementById('disp-team-a').innerText = state.teamA;
            document.getElementById('disp-team-b').innerText = state.teamB;
            document.getElementById('disp-tour').innerText = state.tour;
            document.getElementById('disp-p1-name').innerText = state.p1.name;
            document.getElementById('disp-p2-name').innerText = state.p2.name;
            document.getElementById('disp-p1-score').innerText = `${state.p1.r} (${state.p1.b})`;
            document.getElementById('disp-p2-score').innerText = `${state.p2.r} (${state.p2.b})`;
            document.getElementById('disp-opp-score').innerText = state.oppScore;
            document.getElementById('disp-target').innerText = state.target;

            // Highlight Strike
            document.getElementById('p1-row').className = state.strike === 1 ? "player-row on-strike" : "player-row";
            document.getElementById('p2-row').className = state.strike === 2 ? "player-row on-strike" : "player-row";

            // Analytics
            let totalBalls = (state.overs * 6) + state.balls;
            let crr = totalBalls > 0 ? (state.runs / totalBalls * 6).toFixed(2) : "0.00";
            document.getElementById('stat-crr').innerText = crr;
            document.getElementById('stat-pship').innerText = `${state.pship.r} (${state.pship.b})`;
            document.getElementById('stat-extras').innerText = state.extras;
            
            // Sync Input Fields
            document.getElementById('in-tour').value = state.tour;
            document.getElementById('in-team-a').value = state.teamA;
            document.getElementById('in-team-b').value = state.teamB;
            document.getElementById('in-p1').value = state.p1.name;
            document.getElementById('in-p2').value = state.p2.name;
        }

        function showFX(text, color) {
            const el = document.getElementById('overlay-layer');
            el.innerText = text;
            el.style.color = color;
            el.style.display = 'flex';
            setTimeout(() => { el.style.display = 'none'; }, 2500);
        }

        function login() {
            if(document.getElementById('pin').value === "8718") {
                localStorage.setItem("admin_auth", "active");
                showDashboard();
            } else { alert("WRONG PIN"); }
        }

        function showDashboard() {
            document.getElementById('auth-box').classList.add('hidden');
            document.getElementById('dashboard').classList.remove('hidden');
        }

        function resetMatch() {
            if(confirm("WIPE ALL DATA?")) {
                db.set({
                    runs: 0, wkts: 0, overs: 0, balls: 0,
                    teamA: "TEAM A", teamB: "TEAM B", tour: "TOURNAMENT",
                    p1: { name: "PLAYER 1", r: 0, b: 0 },
                    p2: { name: "PLAYER 2", r: 0, b: 0 },
                    strike: 1, target: 0, oppScore: "0-0 (0.0)", extras: 0,
                    pship: { r: 0, b: 0 }
                });
            }
        }

        function saveMatchToArchive() {
            const matchData = {
                ...state,
                timestamp: Date.now(),
                date: new Date().toLocaleDateString()
            };
            archive.push(matchData).then(() => alert("Saved to History!"));
        }

        function loadHistory() {
            archive.limitToLast(10).on('value', snap => {
                const list = document.getElementById('history-list');
                list.innerHTML = "";
                snap.forEach(child => {
                    const m = child.val();
                    list.innerHTML += `
                        <div style="background:#000; padding:15px; border-radius:10px; margin-bottom:10px; border-left:4px solid var(--primary)">
                            <div style="font-size:12px; color:var(--secondary)">${m.date} - ${m.tour}</div>
                            <div style="font-size:18px; font-weight:bold;">${m.teamA} vs ${m.teamB}</div>
                            <div style="color:var(--primary)">Final: ${m.runs}/${m.wkts} (${m.overs}.${m.balls})</div>
                        </div>
                    `;
                });
            });
        }
    </script>
</body>
</html>
